(()=>{"use strict";console.log("JS loaded");const e=document.querySelector(".mode-switcher"),t=document.querySelectorAll(".logo"),n=document.querySelector("body"),s=document.querySelector("header");e.addEventListener("click",(()=>{n.classList.toggle("darkmode"),function(){const r=n.classList.contains("darkmode")?"./image/logo-dark@2x.png":"./image/logo@2x.png",c=n.classList.contains("darkmode")?"./image/sun-regular.svg#sun":"./image/moon-regular.svg#moon",o=n.classList.contains("darkmode")?"#121212":"#ffffff";t.forEach((e=>e.src=r)),e.innerHTML=`<use href=${c}></use>`,s.style.backgroundColor=o}()}));const r=document.querySelector(".nav-trigger-button"),c=document.querySelector(".nav"),o=document.querySelector(".features"),d=document.querySelector(".nav-trigger"),i=window.matchMedia("screen and (min-width: 375px)");i.addEventListener("change",(function(){i.matches?(s.classList.remove("extend"),c.classList.remove("hidden"),o.classList.remove("hidden")):(s.classList.remove("extend"),c.classList.add("hidden"),o.classList.add("hidden"),d.checked=!1)})),r.addEventListener("click",(function(){if(d.checked)s.style.backgroundColor="",s.classList.remove("extend"),c.classList.add("hidden"),o.classList.add("hidden");else{const e=n.classList.contains("darkmode")?"#121212":"#ffffff";s.style.backgroundColor=e,s.classList.add("extend"),c.classList.remove("hidden"),o.classList.remove("hidden")}}));const a=document.querySelector(".form__control--prev"),l=document.querySelector(".form__control--next"),m=document.querySelector(".form__address"),u=document.querySelector(".form__delivery"),f=document.querySelector(".form__payment"),h=(document.querySelector(".form"),Array.from(document.querySelectorAll(".stepper>div"))),L=Array.from(document.querySelectorAll(".stepper>span"));function p(e=1){h.forEach((t=>{h.indexOf(t)<2*e?t.classList.add("darken"):t.classList.remove("darken")})),L.forEach((t=>{L.indexOf(t)<e?t.classList.add("darken"):t.classList.remove("darken")}))}p();let v="first";l.addEventListener("click",(function(e){switch(e.preventDefault(),v){case"first":m.classList.add("hidden"),u.classList.remove("hidden"),a.classList.remove("hidden"),v="second",p(2);break;case"second":u.classList.add("hidden"),f.classList.remove("hidden"),this.textContent="確認下單",v="third",p(3)}})),a.addEventListener("click",(function(e){switch(e.preventDefault(),v){case"second":u.classList.add("hidden"),m.classList.remove("hidden"),this.classList.add("hidden"),v="first",p(1);break;case"third":f.classList.add("hidden"),u.classList.remove("hidden"),v="second",this.nextElementSibling.innerHTML="下一步<span>&rarr;</span>",p(2)}}));const g=[{id:"1",name:"破壞補丁修身牛仔褲",price:1299},{id:"2",name:"刷色直筒牛仔褲",price:3999}],y=document.querySelector(".shop-bag"),S=document.querySelector(".shop-bag__delivery-fee"),k=document.querySelector(".shop-bag__total"),q=document.querySelector(".form__delivery"),E=document.querySelectorAll('input[type="radio"]'),_=document.querySelectorAll(".shop-bag__item-price"),b=function(){let e=0,t=Number(S.textContent.slice(1).replace(",",""));isNaN(t)&&(t=0),_.forEach((t=>{const n=Number(t.textContent.slice(1).replace(",",""));e+=n})),k.innerHTML=`<span class="shop-bag__total">$${(e+t).toLocaleString()}</span>`};y.addEventListener("click",(function({target:e}){const t=e.classList.contains("counter-btn");if(t&&t){const t=e.classList.contains("minus")?-1:1,n=e.parentElement.children[1];let s=Number(n.textContent);const r=e.parentElement.nextElementSibling,c=e.parentElement.parentElement.dataset.id,o=g.find((e=>e.id===c)).price;if(!s&&-1===t)return;n.innerHTML=`<span>${s+=t}<span>`,r.innerHTML=`<div>$${Number(s*o).toLocaleString()}</div>`,b()}})),q.addEventListener("click",(function(){E.forEach((e=>{if(e.checked)return S.textContent=e.parentElement.lastElementChild.textContent,void b()}))}))})();